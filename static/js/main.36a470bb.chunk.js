(this.webpackJsonpccube_react=this.webpackJsonpccube_react||[]).push([[0],{162:function(e,t,n){},207:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(31),s=n.n(c),r=(n(162),n(150)),i=n(22),l=n(15),d=n(17),u=n(20),h=n(19),j=n(5),p=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).checkForPassportUser=function(){fetch("http://localhost:4000/api/v1/test",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({obj:"YAY!!!!"})}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},o.getUserAttendance=function(){var e=localStorage.getItem("userObj");fetch("http://localhost:4000/api/v1/attendant/get_employee_attendance",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({employee:e._id,month:"02"})}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},o.setInputValue=function(e){var t=e.target,n=t.name,a=t.value,c={};c[n]=a,o.setState(c)},o.registerCustomerDetails=function(){var e=JSON.parse(localStorage.getItem("userObj"));console.log("user in local",e);var t=o.state,n=t.name,a=t.email,c=t.password,s=(t.locality,t.address),r={phoneNumber:e.phoneNumber,name:n,email:a,password:c,locality:"60d723bf36d7b6856f7345de",address:s};fetch("http://localhost:4000/api/v1/customer/user/register_customer",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},o.saveResidentialSociety=function(){fetch("http://localhost:4000/api/v1/operation/residential/create_residential",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"RPS",city:"Faridabad",state:"Haryana",zipCode:"121002"})}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},o.getEmployeeSchedule=function(){fetch("http://localhost:4000/api/v1/operation/schedule/get_schedule",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({attendantId:"6039a78a72f97828750f0b0e"})}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},o.state={name:"",email:"",password:"",locality:"",address:""},o}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.password,o=e.email,a=e.locality,c=e.address;return Object(j.jsxs)("div",{style:{width:"500px",margin:"auto"},children:[Object(j.jsx)("h1",{children:"Home page"}),Object(j.jsx)("button",{onClick:this.checkForPassportUser,children:"Check it"}),Object(j.jsx)("button",{onClick:this.getUserAttendance,children:"Get attendance"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{className:"form",children:[Object(j.jsx)("input",{type:"text",value:t,onChange:this.setInputValue,name:"name",placeholder:"name"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",value:n,onChange:this.setInputValue,name:"password",placeholder:"password"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",value:o,onChange:this.setInputValue,name:"email",placeholder:"email"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",value:a,onChange:this.setInputValue,name:"locality",placeholder:"locality"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",value:c,onChange:this.setInputValue,name:"address",placeholder:"address"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:this.registerCustomerDetails,children:"Register user"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:this.saveResidentialSociety,children:"Save society"})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:this.getEmployeeSchedule,children:"Get schedule"})]})]})}}]),n}(a.a.Component),b=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).loginUser=function(e){var t=o.props.history;console.log("login props",o.props);var n={employeeId:e,password:"qwerty12"};fetch("http://localhost:4000/api/v1/auth/login_employeeWPassword",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),localStorage.setItem("userObj",JSON.stringify(e.user)),localStorage.setItem("userToken",e.token),t.push("/home")})).catch((function(e){console.error("Error:",e)}))},o.verifyOTP=function(){var e=o.state.otpCode,t=o.props.history;console.log("login props",o.props);var n={phoneNumber:965478861,otpCode:e};fetch("http://localhost:4000/api/v1/auth/login_employeeWOTP",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),e.user&&(localStorage.setItem("userObj",JSON.stringify(e.user)),localStorage.setItem("userToken",e.token),t.push("/home"))})).catch((function(e){console.error("Error:",e)}))},o.setOTP=function(e){o.setState({otpCode:e.target.value})},o.state={otpCode:null},o}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.state.otpCode;return console.log("login props",this.props),Object(j.jsxs)("div",{style:{width:"500px",margin:"auto"},children:[Object(j.jsx)("h1",{children:"Login"}),Object(j.jsx)("button",{className:"login",onClick:function(){return e.loginUser("AJK2124D")},children:"Login user"}),Object(j.jsx)("button",{className:"login",onClick:function(){return e.loginUser("AJHJ124D")},children:"Login user 2"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"number",value:t,onChange:this.setOTP}),Object(j.jsx)("button",{onClick:this.verifyOTP,children:"Verify OTP"})]})}}]),n}(a.a.Component),f=Object(i.f)(b),m=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).calculateMines=function(e){for(var t=[],n=0,o=e.length;n<o;n++){var a=e[n].split(","),c=[];console.log("row to sort",a,e[n]);for(var s=0,r=a.length;s<r;s++){var i=0;if(a[s-1]&&"X"===a[s-1]&&i++,a[s+1]&&"X"===a[s+1]&&i++,e[n-1]){var l=e[n-1].split(",");l[s]&&"X"===l[s]&&i++,l[s-1]&&"X"===l[s-1]&&i++,l[s+1]&&"X"===l[s+1]&&i++}if(e[n+1]){var d=e[n+1].split(",");d[s]&&"X"===d[s]&&i++,d[s-1]&&"X"===d[s-1]&&i++,d[s+1]&&"X"===d[s+1]&&i++}console.log("mines found",i),c.push(i)}console.log("resulted array",c),t.push(c.toString())}console.log("result string array",t)},o.state={},o}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=["XOO","OOO","XXO"];return Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(){return e.calculateMines(t)},children:"Calculate"})})}}]),n}(a.a.Component),g=n(26),O=n.n(g),x=n(42),v=n(139),y=n.n(v),S=n(281),C=n(153),w=n(280),N=n(123),T=n(1),k=n(279);var I=function(e){var t=e.fileUploaded,n=e.selectedModel,o={name:n.replace(/ /g,"_").toLowerCase(),onChange:function(e){var o=new File([e.file],"".concat(n.replace(/ /g,"_").toLowerCase(),".png"));t(o)}};return Object(j.jsx)(k.a,Object(T.a)(Object(T.a)({name:"file",beforeUpload:function(){return!1},accept:".png, .gif, .jpg, .jpeg"},o),{},{children:Object(j.jsx)(N.a,{disabled:!n.length,children:"Click to Upload"})}))},P=n.p+"static/media/Pulse-1s.82769bdb.svg",M=(n(206),n(207),S.a.Option),F=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).fetchAllCarModels=function(){o.setState({loading:!0},(function(){fetch("http://13.235.9.231:3000/api/v1/carModel/get_all_cars").then((function(e){return e.json()})).then((function(e){var t=[],n=[];e.data.map((function(e){t.find((function(t){return t===e.brand}))||t.push(e.brand),n.find((function(t){return t===e.model}))||n.push({brand:e.brand,model:e.model,image:e.image})})),o.setState({brands:t.sort((function(e,t){return e-t})),models:n,loading:!1})}))}))},o.brandSelected=function(e){var t=o.state.models,n=[];t.map((function(t){t.brand!==e||t.image||n.push(t.model)})),o.setState({selectedBrand:e,inputModels:n},(function(){o.formRef.current.resetFields(["model","image"])}))},o.modelSelected=function(e){o.setState({selectedModel:e})},o.fileUploaded=function(e){var t=o.state,n=t.selectedBrand,a=t.selectedModel;o.setState({loading:!0},Object(x.a)(O.a.mark((function t(){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.getSignedUrl();case 2:(c=t.sent).config&&(c.config.dirName="images/car-models/".concat(n.toLowerCase())),new y.a(c.config).uploadFile(e,"".concat(a.replace(/ /g,"_").toLowerCase(),".png")).then((function(e){o.saveImageToDB("https://dimqa6sffarw4.cloudfront.net/".concat(e.key))})).catch((function(e){o.setState({loading:!1}),o.showNotification("error",e)}));case 6:case"end":return t.stop()}}),t)}))))},o.saveImageToDB=function(e){var t=o.state,n=t.selectedBrand,a=t.selectedModel,c=t.models,s=t.inputModels;fetch("http://13.235.9.231:3000/api/v1/carModel/save_carmodel_image",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({brand:n,model:a,image:e})}).then((function(e){return e.json()})).then((function(e){var t=c.findIndex((function(e){return e===a})),n=s.findIndex((function(e){return e===a}));c.splice(t,1),s.splice(n,1),o.setState({loading:!1,models:c,inputModels:s,selectedModel:""},(function(){o.formRef.current.resetFields(["model","image"]),window.open(e.data.image,"_blank")}))})).catch((function(e){console.error("got errror",e),o.setState({loading:!1}),o.showNotification("error",e)}))},o.getSignedUrl=function(){var e=o.state.selectedBrand;return new Promise((function(t,n){fetch("http://13.235.9.231:3000/api/v1/utils/get-aws-config",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e})}).then((function(e){return e.json()})).then((function(e){t(e)}))}))},o.showNotification=function(e,t){C.a[e]({message:t,description:""})},o.state={loading:!1,image:null,brands:[],models:[],inputModels:[],selectedBrand:"",selectedModel:""},o.formRef=a.a.createRef(),o}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.fetchAllCarModels()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.brands,o=e.inputModels,a=e.selectedModel;return Object(j.jsx)("div",{className:"form",children:Object(j.jsx)(w.a,{name:"carImgUpload",onFinish:this.onFormFinish,ref:this.formRef,children:Object(j.jsxs)("div",{className:"loginForm",children:[Object(j.jsx)("div",{className:"inputField",children:Object(j.jsx)(w.a.Item,{className:"textLabel",label:"Brand",name:"brand",rules:[{required:!0,message:"Please select a brand"}],children:Object(j.jsx)(S.a,{showSearch:!0,defaultValue:"",style:{width:250},onChange:this.brandSelected,children:n.length?n.map((function(e){return Object(j.jsx)(M,{value:e,children:e},e)})):Object(j.jsx)(M,{value:"",children:"Loading brands"})})})}),Object(j.jsx)("div",{className:"inputField",children:Object(j.jsx)(w.a.Item,{className:"textLabel",label:"Model",name:"model",rules:[{required:!0,message:"Please select a model"}],children:Object(j.jsx)(S.a,{defaultValue:"",style:{width:250},onChange:this.modelSelected,children:o.length?o.map((function(e){return Object(j.jsx)(M,{value:e,children:e},e)})):Object(j.jsx)(M,{value:"",children:"Select brand"})})})}),Object(j.jsx)("div",{className:"inputField",children:Object(j.jsx)(w.a.Item,{className:"textLabel",label:"Image",name:"image",disabled:!a.length,children:Object(j.jsx)(I,{selectedModel:a,fileUploaded:this.fileUploaded})})}),Object(j.jsxs)("div",{className:"submitBtn",children:[Object(j.jsx)(N.a,{htmlType:"submit",disabled:t,children:"Upload"}),t?Object(j.jsx)("img",{src:P,alt:"loading",width:"50px"}):null]})]})})})}}]),n}(a.a.Component);n(276);var _=function(){return Object(j.jsx)(r.a,{children:Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{path:"/login",children:Object(j.jsx)(f,{})}),Object(j.jsx)(i.a,{path:"/home",children:Object(j.jsx)(p,{})}),Object(j.jsx)(i.a,{path:"/test",children:Object(j.jsx)(m,{})}),Object(j.jsx)(i.a,{path:"/car",children:Object(j.jsx)(F,{})})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,282)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),o(e),a(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(_,{})}),document.getElementById("root")),J()}},[[277,1,2]]]);
//# sourceMappingURL=main.36a470bb.chunk.js.map