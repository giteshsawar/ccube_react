(this.webpackJsonpccube_react=this.webpackJsonpccube_react||[]).push([[0],{163:function(e,t,n){},207:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(31),s=n.n(c),r=(n(163),n(152)),i=n(22),l=n(14),d=n(16),u=n(19),h=n(18),j=n(3),b=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).checkForPassportUser=function(){fetch("http://localhost:4000/api/v1/test",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({obj:"YAY!!!!"})}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},a.getUserAttendance=function(){var e=localStorage.getItem("userObj");fetch("http://localhost:4000/api/v1/attendant/get_employee_attendance",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({employee:e._id,month:"02"})}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},a.setInputValue=function(e){var t=e.target,n=t.name,o=t.value,c={};c[n]=o,a.setState(c)},a.registerCustomerDetails=function(){var e=JSON.parse(localStorage.getItem("userObj"));console.log("user in local",e);var t=a.state,n=t.name,o=t.email,c=t.password,s=(t.locality,t.address),r={phoneNumber:e.phoneNumber,name:n,email:o,password:c,locality:"60d723bf36d7b6856f7345de",address:s};fetch("http://localhost:4000/api/v1/customer/user/register_customer",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},a.saveResidentialSociety=function(){fetch("http://localhost:4000/api/v1/operation/residential/create_residential",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"RPS",city:"Faridabad",state:"Haryana",zipCode:"121002"})}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},a.getEmployeeSchedule=function(){fetch("http://localhost:4000/api/v1/operation/schedule/get_schedule",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({attendantId:"6039a78a72f97828750f0b0e"})}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},a.state={name:"",email:"",password:"",locality:"",address:""},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.password,a=e.email,o=e.locality,c=e.address;return Object(j.jsxs)("div",{style:{width:"500px",margin:"auto"},children:[Object(j.jsx)("h1",{children:"Home page"}),Object(j.jsx)("button",{onClick:this.checkForPassportUser,children:"Check it"}),Object(j.jsx)("button",{onClick:this.getUserAttendance,children:"Get attendance"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{className:"form",children:[Object(j.jsx)("input",{type:"text",value:t,onChange:this.setInputValue,name:"name",placeholder:"name"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",value:n,onChange:this.setInputValue,name:"password",placeholder:"password"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",value:a,onChange:this.setInputValue,name:"email",placeholder:"email"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",value:o,onChange:this.setInputValue,name:"locality",placeholder:"locality"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",value:c,onChange:this.setInputValue,name:"address",placeholder:"address"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:this.registerCustomerDetails,children:"Register user"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:this.saveResidentialSociety,children:"Save society"})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:this.getEmployeeSchedule,children:"Get schedule"})]})]})}}]),n}(o.a.Component),f=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).loginUser=function(e){var t=a.props.history;console.log("login props",a.props);var n={employeeId:e,password:"qwerty12"};fetch("http://localhost:4000/api/v1/auth/login_employeeWPassword",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),localStorage.setItem("userObj",JSON.stringify(e.user)),localStorage.setItem("userToken",e.token),t.push("/home")})).catch((function(e){console.error("Error:",e)}))},a.verifyOTP=function(){var e=a.state.otpCode,t=a.props.history;console.log("login props",a.props);var n={phoneNumber:965478861,otpCode:e};fetch("http://localhost:4000/api/v1/auth/login_employeeWOTP",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),e.user&&(localStorage.setItem("userObj",JSON.stringify(e.user)),localStorage.setItem("userToken",e.token),t.push("/home"))})).catch((function(e){console.error("Error:",e)}))},a.setOTP=function(e){a.setState({otpCode:e.target.value})},a.state={otpCode:null},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.state.otpCode;return console.log("login props",this.props),Object(j.jsxs)("div",{style:{width:"500px",margin:"auto"},children:[Object(j.jsx)("h1",{children:"Login"}),Object(j.jsx)("button",{className:"login",onClick:function(){return e.loginUser("AJK2124D")},children:"Login user"}),Object(j.jsx)("button",{className:"login",onClick:function(){return e.loginUser("AJHJ124D")},children:"Login user 2"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"number",value:t,onChange:this.setOTP}),Object(j.jsx)("button",{onClick:this.verifyOTP,children:"Verify OTP"})]})}}]),n}(o.a.Component),p=Object(i.f)(f),m=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).calculateMines=function(e){for(var t=[],n=0,a=e.length;n<a;n++){var o=e[n].split(","),c=[];console.log("row to sort",o,e[n]);for(var s=0,r=o.length;s<r;s++){var i=0;if(o[s-1]&&"X"===o[s-1]&&i++,o[s+1]&&"X"===o[s+1]&&i++,e[n-1]){var l=e[n-1].split(",");l[s]&&"X"===l[s]&&i++,l[s-1]&&"X"===l[s-1]&&i++,l[s+1]&&"X"===l[s+1]&&i++}if(e[n+1]){var d=e[n+1].split(",");d[s]&&"X"===d[s]&&i++,d[s-1]&&"X"===d[s-1]&&i++,d[s+1]&&"X"===d[s+1]&&i++}console.log("mines found",i),c.push(i)}console.log("resulted array",c),t.push(c.toString())}console.log("result string array",t)},a.state={},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=["XOO","OOO","XXO"];return Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(){return e.calculateMines(t)},children:"Calculate"})})}}]),n}(o.a.Component),g=n(25),O=n.n(g),x=n(36),v=n(95),y=n.n(v),S=n(282),C=n(155),w=n(281),N=n(125),M=n(1),I=n(280);var T=function(e){var t=e.fileUploaded,n=e.selectedModel,a={name:n.replace(/ /g,"_").toLowerCase(),onChange:function(e){var a=new File([e.file],"".concat(n.replace(/ /g,"_").toLowerCase(),".png"));t(a)}};return Object(j.jsx)(I.a,Object(M.a)(Object(M.a)({name:"file",beforeUpload:function(){return!1},accept:".png, .gif, .jpg, .jpeg"},a),{},{children:Object(j.jsx)(N.a,{disabled:!n.length,children:"Click to Upload"})}))},k=n.p+"static/media/Pulse-1s.82769bdb.svg",_=(n(129),n(207),S.a.Option),F=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).fetchAllCarModels=function(){a.setState({loading:!0},(function(){fetch("http://13.235.9.231:3000/api/v1/carModel/get_all_cars").then((function(e){return e.json()})).then((function(e){var t=[],n=[];e.data.map((function(e){t.find((function(t){return t===e.brand}))||t.push(e.brand),n.find((function(t){return t===e.model}))||n.push({brand:e.brand,model:e.model,image:e.image})})),a.setState({brands:t.sort((function(e,t){return e-t})),models:n,loading:!1})}))}))},a.brandSelected=function(e){var t=a.state.models,n=[];t.map((function(t){t.brand!==e||t.image||n.push(t.model)})),a.setState({selectedBrand:e,inputModels:n},(function(){a.formRef.current.resetFields(["model","image"])}))},a.modelSelected=function(e){a.setState({selectedModel:e})},a.fileUploaded=function(e){var t=a.state,n=t.selectedBrand,o=t.selectedModel;a.setState({loading:!0},Object(x.a)(O.a.mark((function t(){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getSignedUrl();case 2:(c=t.sent).config&&(c.config.dirName="images/car-models/".concat(n.toLowerCase())),new y.a(c.config).uploadFile(e,"".concat(o.replace(/ /g,"_").toLowerCase(),".png")).then((function(e){a.saveImageToDB("https://dimqa6sffarw4.cloudfront.net/".concat(e.key))})).catch((function(e){a.setState({loading:!1}),a.showNotification("error",e)}));case 6:case"end":return t.stop()}}),t)}))))},a.saveImageToDB=function(e){var t=a.state,n=t.selectedBrand,o=t.selectedModel,c=t.models,s=t.inputModels;fetch("http://13.235.9.231:3000/api/v1/carModel/save_carmodel_image",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({brand:n,model:o,image:e})}).then((function(e){return e.json()})).then((function(e){var t=c.findIndex((function(e){return e===o})),n=s.findIndex((function(e){return e===o}));c.splice(t,1),s.splice(n,1),a.setState({loading:!1,models:c,inputModels:s,selectedModel:""},(function(){a.formRef.current.resetFields(["model","image"]),window.open(e.data.image,"_blank")}))})).catch((function(e){console.error("got errror",e),a.setState({loading:!1}),a.showNotification("error",e)}))},a.getSignedUrl=function(){var e=a.state.selectedBrand;return new Promise((function(t,n){fetch("http://13.235.9.231:3000/api/v1/utils/get-aws-config",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e})}).then((function(e){return e.json()})).then((function(e){t(e)}))}))},a.showNotification=function(e,t){C.a[e]({message:t,description:""})},a.state={loading:!1,image:null,brands:[],models:[],inputModels:[],selectedBrand:"",selectedModel:""},a.formRef=o.a.createRef(),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.fetchAllCarModels()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.brands,a=e.inputModels,o=e.selectedModel;return Object(j.jsx)("div",{className:"form",children:Object(j.jsx)(w.a,{name:"carImgUpload",onFinish:this.onFormFinish,ref:this.formRef,children:Object(j.jsxs)("div",{className:"loginForm",children:[Object(j.jsx)("div",{className:"inputField",children:Object(j.jsx)(w.a.Item,{className:"textLabel",label:"Brand",name:"brand",rules:[{required:!0,message:"Please select a brand"}],children:Object(j.jsx)(S.a,{showSearch:!0,defaultValue:"",style:{width:250},onChange:this.brandSelected,children:n.length?n.map((function(e){return Object(j.jsx)(_,{value:e,children:e},e)})):Object(j.jsx)(_,{value:"",children:"Loading brands"})})})}),Object(j.jsx)("div",{className:"inputField",children:Object(j.jsx)(w.a.Item,{className:"textLabel",label:"Model",name:"model",rules:[{required:!0,message:"Please select a model"}],children:Object(j.jsx)(S.a,{defaultValue:"",style:{width:250},onChange:this.modelSelected,children:a.length?a.map((function(e){return Object(j.jsx)(_,{value:e,children:e},e)})):Object(j.jsx)(_,{value:"",children:"Select brand"})})})}),Object(j.jsx)("div",{className:"inputField",children:Object(j.jsx)(w.a.Item,{className:"textLabel",label:"Image",name:"image",disabled:!o.length,children:Object(j.jsx)(T,{selectedModel:o,fileUploaded:this.fileUploaded})})}),Object(j.jsxs)("div",{className:"submitBtn",children:[Object(j.jsx)(N.a,{htmlType:"submit",disabled:t,children:"Upload"}),t?Object(j.jsx)("img",{src:k,alt:"loading",width:"50px"}):null]})]})})})}}]),n}(o.a.Component);var U=function(e){var t=e.fileUploaded,n=e.selectedModel,a={name:n.replace(/ /g,"_").toLowerCase(),onChange:function(e){var a=new File([e.file],"".concat(n.replace(/ /g,"_").toLowerCase(),".png"));t(a)}};return Object(j.jsx)(I.a,Object(M.a)(Object(M.a)({name:"file",beforeUpload:function(){return!1},accept:".png, .gif, .jpg, .jpeg"},a),{},{children:Object(j.jsx)(N.a,{disabled:!n.length,children:"Click to Upload"})}))},P=(n(276),S.a.Option),B=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).fetchAllCarModels=function(){a.setState({loading:!0},(function(){fetch("http://13.235.9.231:3000/api/v1/carModel/get_all_cars").then((function(e){return e.json()})).then((function(e){var t=[],n=[];e.data.map((function(e){t.find((function(t){return t===e.brand}))||t.push(e.brand),n.find((function(t){return t===e.model}))||n.push({brand:e.brand,model:e.model,image:e.image})})),a.setState({brands:t.sort((function(e,t){return e-t})),models:n,loading:!1})}))}))},a.brandSelected=function(e){var t=a.state.models,n=[];t.map((function(t){t.brand!==e||t.image||n.push(t.model)})),a.setState({selectedBrand:e,inputModels:n},(function(){a.formRef.current.resetFields(["model","image"])}))},a.modelSelected=function(e){a.setState({selectedModel:e})},a.fileUploaded=function(e){var t=a.state,n=t.selectedBrand,o=t.selectedModel;a.setState({loading:!0},Object(x.a)(O.a.mark((function t(){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getSignedUrl();case 2:(c=t.sent).config&&(c.config.dirName="images/car-models/".concat(n.toLowerCase())),new y.a(c.config).uploadFile(e,"".concat(o.replace(/ /g,"_").toLowerCase(),".png")).then((function(e){a.saveImageToDB("https://dimqa6sffarw4.cloudfront.net/".concat(e.key))})).catch((function(e){a.setState({loading:!1}),a.showNotification("error",e)}));case 6:case"end":return t.stop()}}),t)}))))},a.saveImageToDB=function(e){var t=a.state,n=t.selectedBrand,o=t.selectedModel,c=t.models,s=t.inputModels;fetch("http://13.235.9.231:3000/api/v1/carModel/save_carmodel_image",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({brand:n,model:o,image:e})}).then((function(e){return e.json()})).then((function(e){var t=c.findIndex((function(e){return e.model===o})),n=s.findIndex((function(e){return e===o}));console.log("models find",t,c,o),t>=0&&(c[t].image=e.data.image),s.splice(n,1),a.setState({loading:!1,models:c,inputModels:s,selectedModel:""},(function(){a.formRef.current.resetFields(["model","image"])}))})).catch((function(e){console.error("got errror",e),a.setState({loading:!1}),a.showNotification("error",e)}))},a.getSignedUrl=function(){var e=a.state.selectedBrand;return new Promise((function(t,n){fetch("http://13.235.9.231:3000/api/v1/utils/get-aws-config",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:"carModel",folder:e})}).then((function(e){return e.json()})).then((function(e){t(e)}))}))},a.showNotification=function(e,t){C.a[e]({message:t,description:""})},a.state={loading:!1,image:null,brands:[],models:[],inputModels:[],selectedBrand:"",selectedModel:""},a.formRef=o.a.createRef(),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.fetchAllCarModels()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.brands,a=e.inputModels,o=e.selectedModel,c=e.models,s=e.selectedBrand;return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsx)("div",{className:"form",children:Object(j.jsx)(w.a,{name:"carImgUpload",onFinish:this.onFormFinish,ref:this.formRef,children:Object(j.jsxs)("div",{className:"loginForm",children:[Object(j.jsx)("div",{className:"inputField",children:Object(j.jsx)(w.a.Item,{className:"textLabel",label:"Brand",name:"brand",rules:[{required:!0,message:"Please select a brand"}],children:Object(j.jsx)(S.a,{showSearch:!0,defaultValue:"",style:{width:250},onChange:this.brandSelected,children:n.length?n.map((function(e){return Object(j.jsx)(P,{value:e,children:e},e)})):Object(j.jsx)(P,{value:"",children:"Loading brands"})})})}),Object(j.jsx)("div",{className:"inputField",children:Object(j.jsx)(w.a.Item,{className:"textLabel",label:"Model",name:"model",rules:[{required:!0,message:"Please select a model"}],children:Object(j.jsx)(S.a,{defaultValue:"",style:{width:250},onChange:this.modelSelected,children:a.length?a.map((function(e){return Object(j.jsx)(P,{value:e,children:e},e)})):Object(j.jsx)(P,{value:"",children:"Select brand"})})})}),Object(j.jsx)("div",{className:"inputField",children:Object(j.jsx)(w.a.Item,{className:"textLabel",label:"Image",name:"image",disabled:!o.length,children:Object(j.jsx)(U,{selectedModel:o,fileUploaded:this.fileUploaded})})}),Object(j.jsxs)("div",{className:"submitBtn",children:[Object(j.jsx)(N.a,{htmlType:"submit",disabled:t,children:"Upload"}),t?Object(j.jsx)("img",{src:k,alt:"loading",width:"50px"}):null]})]})})}),Object(j.jsx)("div",{className:"list",children:s.length&&c.length?c.map((function(e){if(e.brand===s)return Object(j.jsxs)("div",{className:"car_item",children:[Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:e.image})}),Object(j.jsx)("div",{children:e.model})]})})):null})]})}}]),n}(o.a.Component);n(277);var L=function(){return Object(j.jsx)(r.a,{children:Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{path:"/",children:Object(j.jsx)(B,{})}),Object(j.jsx)(i.a,{path:"".concat("/ccube_react","/login"),children:Object(j.jsx)(p,{})}),Object(j.jsx)(i.a,{path:"".concat("/ccube_react","/home"),children:Object(j.jsx)(b,{})}),Object(j.jsx)(i.a,{path:"".concat("/ccube_react","/test"),children:Object(j.jsx)(m,{})}),Object(j.jsx)(i.a,{path:"".concat("/ccube_react","/car"),children:Object(j.jsx)(F,{})})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,283)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(L,{})}),document.getElementById("root")),J()}},[[278,1,2]]]);
//# sourceMappingURL=main.1a6ed633.chunk.js.map